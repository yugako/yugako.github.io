(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{362:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,o=(r=n(108))&&"object"==typeof r&&"default"in r?r.default:r,c=n(80),f=n(109);n(195);var l,m,h,d,v=n(111),_="0.2.21",y="FB-PERF-TRACE-START",I="FB-PERF-TRACE-STOP",E="FB-PERF-TRACE-MEASURE",T="_wt_",w="@firebase/performance/config",A="@firebase/performance/configexpire",S=((l={})["trace started"]="Trace {$traceName} was started before.",l["trace stopped"]="Trace {$traceName} is not running.",l["no window"]="Window is not available.",l["no app id"]="App id is not available.",l["no project id"]="Project id is not available.",l["no api key"]="Api key is not available.",l["invalid cc log"]="Attempted to queue invalid cc event",l["FB not default"]="Performance can only start when Firebase app instance is the default one.",l["RC response not ok"]="RC response is not ok",l["invalid attribute name"]="Attribute name {$attributeName} is invalid.",l["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",l["invalide custom metric name"]="Custom metric name {$customMetricName} is invalid",l),N=new f.ErrorFactory("performance","Performance",S),M=function(){function t(t){if(!t)throw N.create("no window");this.performance=t.performance,this.PerformanceObserver=t.PerformanceObserver,this.windowLocation=t.location,this.navigator=t.navigator,this.document=t.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=t.localStorage),t.perfMetrics&&t.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=t.perfMetrics.onFirstInputDelay)}return t.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},t.prototype.mark=function(t){this.performance&&this.performance.mark&&this.performance.mark(t)},t.prototype.measure=function(t,e,n){this.performance&&this.performance.measure&&this.performance.measure(t,e,n)},t.prototype.getEntriesByType=function(t){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(t):[]},t.prototype.getEntriesByName=function(t){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(t):[]},t.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},t.prototype.requiredApisAvailable=function(){return!!(fetch&&Promise&&this.navigator&&this.navigator.cookieEnabled)},t.prototype.setupObserver=function(t,e){this.PerformanceObserver&&new this.PerformanceObserver((function(t){for(var n=0,r=t.getEntries();n<r.length;n++){var o=r[n];e(o)}})).observe({entryTypes:[t]})},t.getInstance=function(){return void 0===m&&(m=new t(h)),m},t}();var k,O,R=function(){function t(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}return t.prototype.getAppId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.appId;if(!t)throw N.create("no app id");return t},t.prototype.getProjectId=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.projectId;if(!t)throw N.create("no project id");return t},t.prototype.getApiKey=function(){var t=this.firebaseAppInstance&&this.firebaseAppInstance.options&&this.firebaseAppInstance.options.apiKey;if(!t)throw N.create("no api key");return t},t.getInstance=function(){return void 0===d&&(d=new t),d},t}();function P(){return k}!function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.VISIBLE=1]="VISIBLE",t[t.HIDDEN=2]="HIDDEN",t[t.PRERENDER=3]="PRERENDER",t[t.UNLOADED=4]="UNLOADED"}(O||(O={}));var U=["firebase_","google_","ga_"],D=new RegExp("^[a-zA-Z]\\w*$"),B=40,L=100;function j(){switch(M.getInstance().document.visibilityState){case"visible":return O.VISIBLE;case"hidden":return O.HIDDEN;case"prerender":return O.PRERENDER;default:return O.UNKNOWN}}function F(){var t=M.getInstance().navigator.connection;switch(t&&t.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}var C=new v.Logger("Performance");C.logLevel=v.LogLevel.INFO;var W="0.0.1",J={loggingEnabled:!0},x="FIREBASE_INSTALLATIONS_AUTH";function K(t){var e=function(){var t=M.getInstance().localStorage,e=t.getItem(A);if(!(e&&(n=e,Number(n)>Date.now())))return;var n;var r=t.getItem(w);if(!r)return;try{return JSON.parse(r)}catch(t){return}}();return e?($(e),Promise.resolve()):function(t){return(e=R.getInstance().firebaseAppInstance.installations().getToken(),e.then((function(t){})),e).then((function(e){var n="https://firebaseremoteconfig.googleapis.com/v1/projects/"+R.getInstance().getProjectId()+"/namespaces/fireperf:fetch?key="+R.getInstance().getApiKey(),r=new Request(n,{method:"POST",headers:{Authorization:x+" "+e},body:JSON.stringify({app_instance_id:t,app_instance_id_token:e,app_id:R.getInstance().getAppId(),app_version:_,sdk_version:W})});return fetch(r).then((function(t){if(t.ok)return t.json();throw N.create("RC response not ok")}))})).catch((function(){C.info(V)}));var e}(t).then((function(t){return $(t)})).then((function(t){return function(t){if(!t)return;var e=M.getInstance().localStorage;e.setItem(w,JSON.stringify(t)),e.setItem(A,String(Date.now()+60*R.getInstance().configTimeToLive*60*1e3))}(t)}),(function(){}))}var V="Could not fetch config, will use default configs";function $(t){if(!t)return t;var e=R.getInstance(),n=t.entries||{};return void 0!==n.fpr_enabled?e.loggingEnabled="true"===String(n.fpr_enabled):e.loggingEnabled=J.loggingEnabled,n.fpr_log_source&&(e.logSource=Number(n.fpr_log_source)),n.fpr_log_endpoint_url&&(e.logEndPointUrl=n.fpr_log_endpoint_url),void 0!==n.fpr_vc_network_request_sampling_rate&&(e.networkRequestsSamplingRate=Number(n.fpr_vc_network_request_sampling_rate)),void 0!==n.fpr_vc_trace_sampling_rate&&(e.tracesSamplingRate=Number(n.fpr_vc_trace_sampling_rate)),e.logTraceAfterSampling=H(e.tracesSamplingRate),e.logNetworkAfterSampling=H(e.networkRequestsSamplingRate),t}function H(t){return Math.random()<=t}var z,Z=1;function G(){var t;return Z=2,z=z||(t=M.getInstance().document,new Promise((function(e){if(t&&"complete"!==t.readyState){var n=function(){"complete"===t.readyState&&(t.removeEventListener("readystatechange",n),e())};t.addEventListener("readystatechange",n)}else e()}))).then((function(){return(t=R.getInstance().firebaseAppInstance.installations().getId()).then((function(t){k=t})),t;var t})).then((function(t){return K(t)})).then((function(){return Q()}),(function(){return Q()}))}function Q(){Z=3}var X,Y=1e4,tt=3,et=tt,nt=[];function it(t){if(!t.eventTime||!t.message)throw N.create("invalid cc log");nt=c.__spreadArrays(nt,[t])}function ot(){if(X)return X;var t=function(t){return function(e,n){for(var r=[],o=2;o<arguments.length;o++)r[o-2]=arguments[o];var c=t.apply(void 0,r);it({message:c,eventTime:Date.now()})}}(ct);return(X=new v.Logger("@firebase/performance/cc")).logHandler=t,X}function at(t){var e=R.getInstance();!e.instrumentationEnabled&&t.isAuto||(e.dataCollectionEnabled||t.isAuto)&&M.getInstance().requiredApisAvailable()&&(t.isAuto&&j()!==O.VISIBLE||e.loggingEnabled&&e.logTraceAfterSampling&&(3===Z?st(t):G().then((function(){return st(t)}),(function(){return st(t)}))))}function st(t){P()&&setTimeout((function(){return ot().log(t,1)}),0)}function ct(t,e){return 0===e?(r={url:(n=t).url,http_method:n.httpMethod||0,http_response_code:200,response_payload_bytes:n.responsePayloadBytes,client_start_time_us:n.startTimeUs,time_to_response_initiated_us:n.timeToResponseInitiatedUs,time_to_response_completed_us:n.timeToResponseCompletedUs},o={application_info:ut(),network_request_metric:r},JSON.stringify(o)):function(t){var e={name:t.name,is_auto:t.isAuto,client_start_time_us:t.startTimeUs,duration_us:t.durationUs};0!==Object.keys(t.counters).length&&(e.counters=pt(t.counters));var n=t.getAttributes();0!==Object.keys(n).length&&(e.custom_attributes=pt(n));var r={application_info:ut(),trace_metric:e};return JSON.stringify(r)}(t);var n,r,o}function ut(){return{google_app_id:R.getInstance().getAppId(),app_instance_id:P(),web_app_info:{sdk_version:_,page_url:M.getInstance().getUrl(),service_worker_status:(t=M.getInstance().navigator,"serviceWorker"in t?t.serviceWorker.controller?2:3:1),visibility_state:j(),effective_connection_type:F()},application_process_state:0};var t}function pt(t){return Object.keys(t).map((function(e){return{key:e,value:t[e]}}))}!function t(e){setTimeout((function(){if(0!==et){if(!nt.length)return t(Y);var e=c.__spreadArrays(nt);nt=[];var n=e.map((function(t){return{source_extension_json:t.message,event_time_ms:String(t.eventTime)}})),data={request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:R.getInstance().logSource,log_event:n};fetch(R.getInstance().logEndPointUrl,{method:"POST",body:JSON.stringify(data)}).then((function(t){return t.ok||C.info("Call to Firebase backend failed."),t.json()})).then((function(e){var n=Number(e.next_request_wait_millis),r=isNaN(n)?Y:Math.max(Y,n);et=tt,t(r)})).catch((function(){nt=c.__spreadArrays(e,nt),et--,C.info("Tries left: "+et+"."),t(Y)}))}}),e)}(5500);var ft=100,lt="_",mt=["_fp","_fcp","_fid"];var gt=function(){function t(t,e,n){void 0===e&&(e=!1),this.name=t,this.isAuto=e,this.state=1,this.customAttributes={},this.counters={},this.api=M.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=y+"-"+this.randomId+"-"+this.name,this.traceStopMark=I+"-"+this.randomId+"-"+this.name,this.traceMeasure=n||E+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}return t.prototype.start=function(){if(1!==this.state)throw N.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},t.prototype.stop=function(){if(2!==this.state)throw N.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),at(this)},t.prototype.record=function(t,e,n){if(this.durationUs=Math.floor(1e3*e),this.startTimeUs=Math.floor(1e3*t),n&&n.attributes&&(this.customAttributes=c.__assign({},n.attributes)),n&&n.metrics)for(var r=0,o=Object.keys(n.metrics);r<o.length;r++){var f=o[r];isNaN(Number(n.metrics[f]))||(this.counters[f]=Number(Math.floor(n.metrics[f])))}at(this)},t.prototype.incrementMetric=function(t,e){void 0===e&&(e=1),void 0===this.counters[t]&&this.putMetric(t,0),this.counters[t]+=e},t.prototype.putMetric=function(t,e){if(n=t,r=this.name,0===n.length||n.length>ft||!(r&&r.startsWith(T)&&mt.indexOf(n)>-1)&&n.startsWith(lt))throw N.create("invalide custom metric name",{customMetricName:t});var n,r;this.counters[t]=e},t.prototype.getMetric=function(t){return this.counters[t]||0},t.prototype.putAttribute=function(t,e){var n,r=!(0===(n=t).length||n.length>B||U.some((function(t){return n.startsWith(t)}))||!n.match(D)),o=function(t){return 0!==t.length&&t.length<=L}(e);if(r&&o)this.customAttributes[t]=e;else{if(!r)throw N.create("invalid attribute name",{attributeName:t});if(!o)throw N.create("invalid attribute value",{attributeValue:e})}},t.prototype.getAttribute=function(t){return this.customAttributes[t]},t.prototype.removeAttribute=function(t){void 0!==this.customAttributes[t]&&delete this.customAttributes[t]},t.prototype.getAttributes=function(){return c.__assign({},this.customAttributes)},t.prototype.setStartTime=function(t){this.startTimeUs=t},t.prototype.setDuration=function(t){this.durationUs=t},t.prototype.calculateTraceMetrics=function(){var t=this.api.getEntriesByName(this.traceMeasure),e=t&&t[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},t.createOobTrace=function(e,n,r){var o=M.getInstance().getUrl();if(o){var c=new t(T+o,!0),f=Math.floor(1e3*M.getInstance().getTimeOrigin());c.setStartTime(f),e&&e[0]&&(c.setDuration(Math.floor(1e3*e[0].duration)),c.putMetric("domInteractive",Math.floor(1e3*e[0].domInteractive)),c.putMetric("domContentLoadedEventEnd",Math.floor(1e3*e[0].domContentLoadedEventEnd)),c.putMetric("loadEventEnd",Math.floor(1e3*e[0].loadEventEnd)));if(n){var l=n.find((function(t){return"first-paint"===t.name}));l&&l.startTime&&c.putMetric("_fp",Math.floor(1e3*l.startTime));var m=n.find((function(t){return"first-contentful-paint"===t.name}));m&&m.startTime&&c.putMetric("_fcp",Math.floor(1e3*m.startTime)),r&&c.putMetric("_fid",Math.floor(1e3*r))}at(c)}},t.createUserTimingTrace=function(e){at(new t(e,!1,e))},t}();function ht(t){var e=t;if(e&&void 0!==e.responseStart){var n=M.getInstance().getTimeOrigin(),r=Math.floor(1e3*(e.startTime+n)),o=e.responseStart?Math.floor(1e3*(e.responseStart-e.startTime)):void 0,c=Math.floor(1e3*(e.responseEnd-e.startTime));!function(t){var e=R.getInstance();e.instrumentationEnabled&&t.url!==e.logEndPointUrl.split("?")[0]&&e.loggingEnabled&&e.logNetworkAfterSampling&&setTimeout((function(){return ot().log(t,0)}),0)}({url:e.name&&e.name.split("?")[0],responsePayloadBytes:e.transferSize,startTimeUs:r,timeToResponseInitiatedUs:o,timeToResponseCompletedUs:c})}}var vt=5e3;function _t(){P()&&(setTimeout((function(){return function(){var t=M.getInstance(),e=t.getEntriesByType("navigation"),n=t.getEntriesByType("paint");if(t.onFirstInputDelay){var r=setTimeout((function(){gt.createOobTrace(e,n),r=void 0}),vt);t.onFirstInputDelay((function(t){r&&(clearTimeout(r),gt.createOobTrace(e,n,t))}))}else gt.createOobTrace(e,n)}()}),0),setTimeout((function(){return function(){for(var t=M.getInstance(),e=t.getEntriesByType("resource"),n=0,r=e;n<r.length;n++){ht(r[n])}t.setupObserver("resource",ht)}()}),0),setTimeout((function(){return function(){for(var t=M.getInstance(),e=t.getEntriesByType("measure"),n=0,r=e;n<r.length;n++){bt(r[n])}t.setupObserver("measure",bt)}()}),0))}function bt(t){var e=t.name;e.substring(0,E.length)!==E&&gt.createUserTimingTrace(e)}var yt=function(){function t(t){this.app=t,M.getInstance().requiredApisAvailable()?G().then(_t,_t):C.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled.")}return t.prototype.trace=function(t){return new gt(t)},Object.defineProperty(t.prototype,"instrumentationEnabled",{get:function(){return R.getInstance().instrumentationEnabled},set:function(t){R.getInstance().instrumentationEnabled=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dataCollectionEnabled",{get:function(){return R.getInstance().dataCollectionEnabled},set:function(t){R.getInstance().dataCollectionEnabled=t},enumerable:!0,configurable:!0}),t}(),It="[DEFAULT]";function Et(t){t.INTERNAL.registerService("performance",(function(t){if(t.name!==It)throw N.create("FB not default");if("undefined"==typeof window)throw N.create("no window");return function(t){h=t}(window),R.getInstance().firebaseAppInstance=t,new yt(t)}),{})}Et(o),e.registerPerformance=Et},368:function(t,e,n){"use strict";n.r(e);n(362)}}]);